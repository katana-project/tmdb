# tmdb

A Go package for interacting with the v3 REST API of [The Movie Database](https://developer.themoviedb.org/docs).

This API client is autogenerated from the OpenAPI specification, which can be found [here](https://developer.themoviedb.org/openapi).

## Technical notes

The OpenAPI specification is retrieved and corrected with the [_tools/schema_gen.py](./_tools/schema_gen.py) script.

These corrections include:
 - unescaping JSON strings in examples
 - inferring missing schemas from examples
 - adding `nullable: true` where appropriate
 - removing duplicate properties (in the eyes of `ogen` - the OpenAPI generator) and adding `additionalProperties: true`
 - changing `integer` types to `number` where appropriate (when examples contain a float)
 - removing additional characters in examples, which break the JSON syntax
 - replacing the security scheme for a `Bearer` token one

Some of these corrections come at the expense of decreasing the API ergonomics by loosening the schema constraints,
but it is done this way to save time when updating to a newer version of the schema.

## Updating

The API client can be re-generated with the `go generate` command.

A Python 3 installation is needed.

## Tests

Tests for (de)serialization of requests and responses are in the [oas_test_examples_gen_test.go](./oas_test_examples_gen_test.go) file - these are generated by the OpenAPI generator as well.

As of the time of writing, all of them, except 2, pass or are ignored due to insufficient data.
In these 2 failed tests, I believe the example is either wrong or super unlikely to be ever encountered.

## Licensing

This library is licensed under the [MIT License](./LICENSE), but the OpenAPI specification is the property of [The Movie Database](https://developer.themoviedb.org/docs).
